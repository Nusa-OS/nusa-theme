#!/bin/bash
# Nusa OS 1.2-Beta Identity Provider

# 1. OS Branding
cat <<EOF > /etc/os-release
PRETTY_NAME="Nusa OS 1.2-Beta"
NAME="Nusa OS"
VERSION_ID="1.2"
VERSION="1.2 Beta"
ID=nusa
ID_LIKE=ubuntu
EOF

# 2. Global CSS Override (Garuda Gold Accent)
mkdir -p /etc/skel/.config/gtk-3.0/
cat <<EOF > /etc/skel/.config/gtk-3.0/gtk.css
@define-color selected_bg_color #D4AF37;
@define-color selected_fg_color #1A1A1A;
@define-color accent_color #D4AF37;

/* Obsidian Panel Style */
.xfce4-panel {
    background-color: rgba(26, 26, 26, 0.85);
    border-bottom: 1px solid #D4AF37;
}
EOF

# 3. Desktop Policy (No Icons)
xfconf-query -c xfce4-desktop -p /desktop-icons/style -n -t int -s 0 --create || true

# 4. Font & Cursor Config
mkdir -p /etc/skel/.config/xfce4/xfconf/xfce-perchannel-xml/
cat <<EOF > /etc/skel/.config/xfce4/xfconf/xfce-perchannel-xml/xsettings.xml
<?xml version="1.0" encoding="UTF-8"?>
<channel name="xsettings" version="1.0">
  <property name="Net" type="empty">
    <property name="ThemeName" type="string" value="Arc-Darker"/>
    <property name="IconThemeName" type="string" value="Papirus"/>
  </property>
  <property name="Gtk" type="empty">
    <property name="FontName" type="string" value="Inter 10"/>
  </property>
</channel>
EOF

# 5. Apply to Live User
cp -r /etc/skel/.config /home/nusa/ || true
chown -R nusa:nusa /home/nusa/ || true

exit 0
